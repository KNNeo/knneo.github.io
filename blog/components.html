<!DOCTYPE html>
<html lang="en-SG">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<link id="fonts-css" rel="stylesheet" type="text/css" href="../fonts.css">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<link rel="icon" sizes="192x192" type="image/png" href="storytime.png" />
	<link rel="apple-touch-icon" sizes="192x192" href="storytime.png" />
	<script src="./js/theme.js" type="application/javascript" charset="utf-8"></script>
	<title>Components</title>
</head>
<body>
<div class="action-menu home bottom-left">
	<a class="fab back material-icons" href="../index.html" title="Back To Homepage">home</a>
</div>
<div class="action-menu home bottom-right">
	<a class="fab theme material-icons" title="Toggle Dark Mode" onclick="toggleTheme()">brightness_high</a>
</div>
<div id="contents" class="post-body entry-content" style="font-family: Noto Sans;">
<h1 style="text-align: center;">COMPONENTS</h1>
<hr>

<h5>Note - Assume all CSS content have the following colour variables eg. rgb(var(--color))<br />
This is to allow background opacity without enclosing extra container on element eg. rgba(var(--color), 0.5)</h5>
<button onclick="document.querySelector('#variables-style').classList.toggle('hidden')">Show CSS</button>
<pre id="variables-style" class="hidden">
:root {
	--primary: 27, 63, 255;
	--secondary: 96, 159, 255;
	--background: 244, 246, 255;
	--foreground: 0, 0, 0;
	--accent: 221, 221, 221;
}

.darked:root {
	--primary: 0, 228, 255;
	--secondary: 0, 171, 191;
	--background: 0, 17, 20;
	--foreground: 255, 255, 255;
	--accent: 69, 69, 69;
}
</pre>
<style id="base-style">
/* BASE STYLE */
body {
  display: block;
  max-width: 680px;
  padding: 0 10px;
  margin: auto;
  color: rgb(var(--foreground));
  background-color: rgb(var(--background));
  transition: background .2s linear;
  line-height: 1.5;
  overflow-x: hidden;
}

blockquote {
  margin: 1em;
}

a {
  color: rgb(var(--primary));
}

a img,
table div[style|=background] {
    box-sizing: border-box;
  border: 2px solid rgb(var(--secondary));
}

a img:hover,
table div[style|=background]:hover {
    border-color: rgb(var(--primary));
}

a:hover {
  text-decoration: none;
}

.post-body {
    overflow-x: hidden;
}

.tr-caption {
    font-size: 0.7rem;
    max-width: 680px;
}

.tr-caption-container {
    padding: 4px;
    margin-bottom: .5em;
}

/*Assign class based on image resize for responsive, see blog.js resizeImg()*/
.img-width-fit {
  width: 100%;
  height: 100%;
}

.img-width-auto {
  width: auto;
}

.img-separator {
  margin-left: auto;
  margin-right: auto;
}
</style>
<style id="page-style">
/* PAGE ONLY STYLE */
pre {
  padding: 10px;
  border: 1px solid rgb(var(--foreground));
  overflow: auto;
  max-height: 50dvh;
  text-wrap: wrap;
}
.blank {
  height: 15dvh;
  border: 1px dashed rgb(var(--foreground));
}
.blank::before {
    display: flex;
    justify-content: center;
  content: 'This section is intentionally left blank'
}
.hidden {
  display: none;
}
</style>
<script id="base-loader">
let css = document.createElement('style');
css.innerHTML = document.querySelector('#variables-style').innerHTML;
document.body.appendChild(css);
let js = document.createElement('script');
</script>


<h2>Floating Action Buttons</h2>
<h5>Designed by location of menu(s), on corners of screen, responsive<br />
Assume all menus fit on a min screen aspect-ratio of 1:1</h5>
<button onclick="document.querySelector('#fab-style').classList.toggle('hidden')">Show CSS</button>
<button onclick="document.querySelector('#fab-script').classList.toggle('hidden')">Show JS</button>
<pre id="fab-style" class="hidden">
.action-menu {
	position: fixed;
	display: block;
	display: flex;
	flex-direction: column;
	gap: 8px;
	transition: opacity .2s linear, background .2s linear;	
	z-index: 7;
}

.action-menu.bottom-left {
	bottom: 20px;
	left: 20px;
}

.action-menu.bottom-right {
	bottom: 20px;
	right: 20px;
}

.action-menu.bottom-left {
	left: calc(50% - 405px);
	transition: all 0.2s ease-out;
}

.action-menu.bottom-right {
	right: calc(50% - 400px);
	transition: all 0.2s ease-out;
}

.action-menu.bottom-left.hide {
	opacity: 0;
	z-index: -1;
}

.action-menu.bottom-right.hide {
	opacity: 0;
	z-index: -1;
}

a.material-icons {
	text-decoration: none;
}

span.small-icons {
    vertical-align: sub;
}

a.fab {
	border: 1px solid rgb(var(--foreground));
	background-color: rgb(var(--background));
	box-shadow: 3px 3px rgb(var(--foreground));
	border-radius: 8px;
	color: rgb(var(--foreground));
	padding: 8px 6px 6px 6px;
	cursor: pointer;
	line-height: 1;
    text-decoration: none;
	transition: background .2s linear;
	font-size: 36px;

	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

a.fab:hover,
a.fab:focus-within {
	box-shadow: 1px 1px;
	transform: translate(2px, 2px);	
}

/*MEDIA QUERIES - MOBILE SCREENS*/
@media only screen and (max-width: 880px) {
	.action-menu.bottom-left {
		left: 15px;
		transform: translateX(0);
	}
	.action-menu.bottom-right {
		right: 15px;
		transform: translateX(0);
	}
	.action-menu.bottom-left.hide {
		transform: translateX(-15em);
	}
	.action-menu.bottom-right.hide {
		transform: translateX(15em);
	}
}
</pre>
<pre id="fab-script" class="hidden">
window.addEventListener('load', displayFAB);
// initial load
function displayFAB() {
	// if overlay element present
	if(document.querySelector('#Overlay') != null && document.querySelector('#Overlay').style.display != 'none')
		return;
	// if share feature unavailable, remove button
	if(!navigator.share) {
		document.querySelector('.fab.share')?.remove();
	}
}

// scroll event
function toggleActionsOnScroll() {
	// position of buttons on scroll
	let pageDown = document.body.scrollTop > 0.3 * document.documentElement.clientHeight || 
	document.documentElement.scrollTop > 0.3 * document.documentElement.clientHeight;
	if(!isBlogger()) {
		if (pageDown) {
			toggleActions(['.fab.share', '.fab.search', '.fab.top'], '.action-menu.bottom-right');
		}
		else {
			toggleActions(['.fab.share', '.fab.search', '.fab.theme'], '.action-menu.bottom-right');
		}
	}
	else {
		if (pageDown) {
			toggleActions(['.fab.share', '.fab.top'], '.action-menu.bottom-right');
		}
		else {
			toggleActions(['.fab.share', '.fab.search'], '.action-menu.bottom-right');
		}
		if(isMediumWidth()) toggleActions(['.fab.sidebar'], '.action-menu.bottom-left');
		else toggleActions([], '.action-menu.bottom-left');
	}
	
	// works with header, when scroll down/up, hide/show buttons
	let st = window.pageYOffset || document.documentElement.scrollTop;
	let diff = st - window['scrollTop'];
	let scrollDown = st > 0.3 * document.documentElement.clientHeight && diff &lt;= 0.1;
	if(scrollDown || !pageDown) {
		document.querySelector('.action-menu.bottom-left')?.classList.remove('hide');
		document.querySelector('.action-menu.bottom-right')?.classList.remove('hide');
	}
	else if(isSmallWidth()) {
		document.querySelector('.action-menu.bottom-left')?.classList.add('hide');
		document.querySelector('.action-menu.bottom-right')?.classList.add('hide');
	}
}

// generic toggle FAB function based on residing menu
function toggleActions(showElements, parentElement) {
	if(!showElements || !parentElement) return;
	if(typeof(parentElement) == 'string') parentElement = document.querySelector(parentElement);
	
	// hide all in parent element: assume has fab class children
	for(let fab of parentElement.querySelectorAll('.fab'))
	{
		fab.classList.add('hidden');
	}
	
	// show button(s) specified
	if(Array.isArray(showElements)) {
		for(let elem of showElements)
		{
			if(typeof(elem) == 'string') elem = document.querySelector(elem);
			if(elem != null) elem.classList.remove('hidden');
		}
	}
	else if(typeof(showElements) == 'string') {
		showElements = document.querySelector(showElements);
		if(showElements != null) showElements.classList.remove('hidden');
	}
	else if(showElements != null)
		showElements.classList.remove('hidden');
}
</pre>
<script id="fab-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#fab-style').innerHTML;
document.body.appendChild(css);
js = document.createElement('script');
js.innerHTML = document.querySelector('#fab-script').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');
document.body.appendChild(js);
</script>
<pre id="fab-tag">Refer to home button on bottom left and dark mode toggle button on bottom right of this page</pre>


<h2>Pop-Up Content</h2>
<h5>On right-click of external links, supported URLs will show embed content/iframe</h5>
<button onclick="document.querySelector('#popup-style').classList.toggle('hidden')">Show CSS</button>
<button onclick="document.querySelector('#popup-script').classList.toggle('hidden')">Show JS</button>
<pre id="popup-style" class="hidden">
.popup {
	display: inline;
	cursor: pointer;
}

.popup > .text {
  display: inline;
}

.popup > .text:hover {
  color: rgb(var(--foreground));
}

.popup > .content {
  display: none;
  padding-top: 10px;
  left: 0;
  right: 0;
  margin: auto;
  text-align: center;
  max-width: 98%;
  animation: fade-in 0.2s ease-in 0.1s both;
}

.popup.show > .content {
  display: block;
  position: absolute;
  z-index: 9;
}

.overlay {
	background-color: rgb(var(--background), 0.5);
	transition: opacity .3s linear;
	position: fixed;
	width: 100%;
	height: 120%;
	bottom: 0;
	top: 0;
	left: 0;
	z-index: 8;
	cursor: pointer;
}

.overlay.hide {
	z-index: -1;
	opacity: 0;
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translate3d(0, -5%, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}
</pre>
<pre id="popup-script" class="hidden">
window.addEventListener('load', addPopupTriggers);
function addPopupTriggers() {
    for (let a of document.querySelectorAll('a[target="_blank"]'))
		if(!a.classList.contains('ignore')) // for production remove ignore class
			a.addEventListener('mouseover', renderPopup);
}

function addPopupEvents() {
    for (let popup of document.querySelectorAll('.popup')) {
		popup.querySelector('.text').href = popup.getAttribute('data-url');
		popup.addEventListener('contextmenu', togglePopup);
		let dataUrl = popup.getAttribute('data-url').toLowerCase();
		if(dataUrl.includes('.jpg') || dataUrl.includes('.png') || dataUrl.includes('.gif') || dataUrl.includes('blogger.googleusercontent.com'))
			popup.addEventListener('click', togglePopup);
		else
			popup.querySelector('.content').addEventListener('click', closePopups);
    }
}

function closePopups() {
	// kill youtube videos playing
	for(let video of document.querySelectorAll('.yt-video'))
		video.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*');
	
	// close all popups
	for (let popup of document.querySelectorAll('.popup.show')) {
		popup.classList.remove('show');
	}
	
	// hide overlay
	hideOverlay();
}

function renderPopup() {
    event.preventDefault();
	let processLink = this.href;
	
	//exclusion for blogger	images
    if ((processLink.includes('blogspot.com') || processLink.includes('blogger.googleusercontent.com')) && this.target == '') return;
	//exclusion for if target is not _blank
    if (this.target == '') return;
	//exclusion class, if any
    if (this.classList.contains('opt-out')) return;
	//if not compatible for any design
    let newContent = generatePopupContent(processLink);
    if (newContent == null) return;
    let thumbnail = document.createElement('div');
    thumbnail.classList.add('popup');

    let initial = document.createElement('a');
    initial.classList.add('text');
    initial.innerHTML = this.innerHTML;

    let focus = document.createElement('div');
    focus.classList.add('content');
    focus.classList.add('fade-in');
    focus.innerHTML = newContent;
	focus.addEventListener('click', closePopups);

    thumbnail.appendChild(initial);
    thumbnail.appendChild(focus);
	thumbnail.setAttribute('data-url', processLink);
	
	renderEmbedProcess();

    this.outerHTML = thumbnail.outerHTML;
    addPopupEvents();

	return thumbnail;
}

function renderEmbedProcess() {
  try
  {
    if(document.querySelector('#tweet') == null)
    {
      let tweet = document.createElement('script');
      tweet.id = 'tweet';
      tweet.src = 'https://platform.twitter.com/widgets.js';
      tweet.type = 'text/javascript';
      tweet.charset = 'utf-8';
      tweet.async = 'async';
      document.head.appendChild(tweet);
    }
    
    if(document.querySelector('#insta') == null)
    {
      let insta = document.createElement('script');
      insta.id = 'insta';
      insta.src = 'https://www.instagram.com/embed.js';
      insta.type = 'text/javascript';
      insta.charset = 'utf-8';
      insta.async = 'async';
      document.head.appendChild(insta);
    }
    
    if(typeof twttr != 'undefined') twttr.widgets.load(); // to render twitter embed
    if(typeof instgrm != 'undefined') window.instgrm.Embeds.process(); // to render instagram embed
    return true;
  }
  catch(err)
  {
	console.error(err);
	return false;
  }
}

function generatePopupContent(url) {
	if (!url) return null;
    if (url.includes('.jpg') || url.includes('.png') || url.includes('.gif') || url.includes('blogger.googleusercontent.com')) {
        //process image
        return '<div class="separator"><img style="max-height: 360px; max-width: 100%;" src="_URL_" /></div>'.replace('_URL_', url);
    }
    if (url.includes('music.apple.com')) {
        //process itunes embed
		let isTrack = url.includes('i=');
        return '<iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="_HEIGHT_" sandbox="allow-modals allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation" src="_URL_" style="background: transparent; max-width: _WIDTH_px; overflow: hidden; width: 100%;"></iframe>'
			.replace('_HEIGHT_', isTrack ? 170 : 450)
			.replace('_WIDTH_' , isTrack ? 660 : 290)
			.replace('_URL_', url.replace('music.apple.com', 'embed.music.apple.com'));
    }
    if (url.includes('twitter.com') || url.includes('x.com')) {
        //process twitter embed, data-height for timeline is max width
		if(url.includes('/status/')) {
		  return '<div style="display: flex;"><blockquote class="twitter-tweet tw-align-center" data-conversation="none" _data_theme_ data-height="_DATA_HEIGHT_"><a href="_URL_"></a></blockquote><script async="async" charset="utf-8" src="https://platform.twitter.com/widgets.js"></script></div>'
			.replace('_data_theme_', document.querySelector('html').classList.contains('darked') ? 'data-theme="dark"' : '')
			.replace('_URL_', url.replace('x.com', 'twitter.com'))
			.replace('_DATA_HEIGHT_', 0.6*window.innerHeight);
		}
    }
    if (url.includes('youtube.com/watch') || url.includes('youtu.be/')) {
        //process youtube embed
        let id = url.substring(url.indexOf('?v=') + 3);
		if(url.includes('youtu.be/')) id = url.substring(url.indexOf('youtu.be/') + 9);
        return '<iframe class="yt-video" allow="autoplay *; encrypted-media *;" allowfullscreen="" frameborder="0" style="max-height: 360px;" src="https://www.youtube.com/embed/_ID_?enablejsapi=1"></iframe>'
		.replace('_ID_', id);
    }
    if (url.includes('instagram.com/p/') || url.includes('instagram.com/reel/')) {
        //process instagram embed
        return '<center><blockquote class="instagram-media" style="_STYLE_" data-instgrm-permalink="_URL_" data-instgrm-version="14" style="padding:0;"></blockquote></center><script async="async" src="https://www.instagram.com/embed.js"></script>'
		.replace('_STYLE_', window.innerWidth >= 576 ? 'width:550px;' : '')
		.replace('_URL_', url);
    }
    if (url.includes('jisho.org/search/')) {
        //process page as iframe
        return '<iframe id="jisho-frame" src="_URL_" style="height:min(50vh,450px);width:min(98%,760px);"></iframe>'
			.replace('_URL_', url);
    }
    return null;
}

function togglePopup() {
	event.preventDefault();
	if (this.classList.contains('show')) {
		//hide
        closePopups();
	}
    else {
		//display
        closePopups();
        this.classList.add('show');
		showOverlay();
		if(typeof fixExternalFrame == 'function') fixExternalFrame(this);
		renderEmbedProcess();
		// if below threshold height scroll up, else open popup without scroll
		let thresholdHeight = 0.4*window.innerHeight;
		window.scrollTo({
			top: document.querySelector('html').scrollTop + this.getBoundingClientRect().top - (this.getBoundingClientRect().top >= thresholdHeight ? thresholdHeight : this.getBoundingClientRect().top), 
			behavior: 'smooth'
		});
    }
}

function showOverlay() {
	let overlay = document.createElement('div');
	overlay.className = 'overlay';
	overlay.addEventListener('click', closePopups);
	overlay.addEventListener('contextmenu', function() {
		event.preventDefault();
	});
	document.body.appendChild(overlay);
}

function hideOverlay() {
	document.querySelector('.overlay')?.remove();
}
</pre>
<script id="popup-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#popup-style').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');
document.body.appendChild(css);
js = document.createElement('script');
js.innerHTML = document.querySelector('#popup-script').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');
document.body.appendChild(js);
</script>
<h5>Displayed initially as normal link tag with target="_blank" (open in new window/tab)</h5>
<pre>
This fallback and integration is as simple as adding a link like
&lt;a href="[LINK]" target="_blank"&gt;
  [TEXT]
&lt;/a&gt;
so it's inline.
</pre>
<div class="omake">
"There's a thing called give and take, you know?" Yeah Isaki gave you a kiss so she can take your- All according to <a href="https://jisho.org/search/keikaku" class="ignore" target="_blank">keikaku</a> haha
</div>
<h5>When mouse hover, link will be transformed to class popup if URL is supported (click tag to close popup)<br/>
Container class "popup", first child class "text", other children class "content"</h5>
<pre id="popup-tag">
The link will transform into
&lt;div class="popup" data=url="[LINK]"&gt;
  &lt;div class="text"&gt;[TEXT]&lt;/div&gt;
  &lt;div class="content"&gt;[CONTENT]&lt;/div&gt;
&lt;/div&gt;
and behave the same, just that right-clicking on it will show popup, if available.
</pre>
<h5>Jisho.org frame</h5>
<div class="omake">
"There's a thing called give and take, you know?" Yeah Isaki gave you a kiss so she can take your- All according to <a href="https://jisho.org/search/keikaku" target="_blank">keikaku</a> haha</div>
<h5>Apple Music release/track embeds</h5>
<div class="omake">
I also took the chance to listen to some live albums including
<a href="https://music.apple.com/jp/album/wacci-live-at-%E6%97%A5%E6%9C%AC%E6%AD%A6%E9%81%93%E9%A4%A8-2021-youdience/1730894444?l=en-US" target="_blank"><b>wacci's live from 2021</b></a>, and
<a href="https://music.apple.com/jp/album/just-like-this-2023-live/1730871602?l=en-US" target="_blank"><b>SPYAIR's live from last year</b></a>
featuring YOSUKE the new singer. Don't ask if I listened to all, I only pick
<a href="https://music.apple.com/jp/album/saijokyu-wacci-live-at-nippon-budoukan-2021-youdience/1730894444?i=1730894838&amp;l=en-US" target="_blank">the</a>
<a href="https://music.apple.com/jp/album/just-one-life-just-like-this-2023-live/1730871602?i=1730871814&amp;l=en-US" target="_blank">ones</a>
I like. IKE-san still better though. *laughs* Alright, it's different, it's
like if someone shaved their beard away, you know?
</div>
<h5>Instagram post/reel embeds</h5>
<div class="omake">
If not for IDOLY PRIDE's live tweets from
  <a
    href="https://twitter.com/sasaki_nao_0306/status/1680366792617885696?s=20"
    target="_blank"
    >the lot</a
  >
  <a
    href="https://twitter.com/Kanon_Takao/status/1677923717417144321?s=20"
    target="_blank"
    >of them</a
  >&nbsp;(ie. not MusicRay'n and their tiny images haha) I would have died from
  anxiety. Instead I'm going to die of sensory overload on Instagram HAHA
  <a
    href="https://www.instagram.com/p/CuwcJg-PMWZ/?utm_source=ig_web_copy_link&amp;igshid=MzRlODBiNWFlZA=="
    target="_blank"
    >just see</a
  >
  <a
    href="https://www.instagram.com/reel/CurZfAhhGJG/?utm_source=ig_web_copy_link&amp;igshid=MzRlODBiNWFlZA=="
    target="_blank"
    >for yourself</a
  >
  dude</div>
<h5>YouTube embeds</h5>
<div class="omake">
Okay, didn't expect YouTube to recommend me
<a href="https://www.youtube.com/watch?v=VWk4cQyeXbQ" target="_blank"
  >Ogura Yui's halloween livestream</a
>
yesterday, it was pretty good for what it is, she just naturally gave us
fanservice I can't even. *giggles*
<a href="https://www.youtube.com/watch?v=eVpFGyckOJU" target="_blank"
  >The new song's music video</a
>
though, not that great. *laughs*
</div>
<h5>Blogger images (popup will also work with left click)</h5>
<div class="omake">
No, no overall assessment you can leave now- <a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgJV8EW2i5YB8Ndf4OLZadcn-6rZIigy7udwa1ijYgJOo0Z1hka9iqtUqJ4MLNAkwLJfxupFrBP-K_g9rV8Y1cGwqK6a3UpcE_wPXFlujXKIKONI4cyvuUvqeQw9rPMUCIN2ZobxCjE2K2VlKQjoBtOBQliJyZ9tRT1nWvkx420eSePDoUlzg-jqVqQ/s320/PXL_20230308_121315627.jpg" target="_blank">Koharu-chan</a>. *laughs*
</div>


<h2>Carousel</h2>
<h5>Container class "carousel", all child items class "item", all but first child class "hide"<br/>
Click/tap container fast (&lt;200ms) will turn off transition (for observing differences)</h5>
<button onclick="document.querySelector('#carousel-style').classList.toggle('hidden')">Show CSS</button>
<button onclick="document.querySelector('#carousel-script').classList.toggle('hidden')">Show JS</button>
<pre id="carousel-style" class="hidden">
.carousel {
  display: block;
    position: relative;
  transition: height 0.2s;
  padding-top: 1em;
}

.carousel.fast {
  transition: none;
}

.carousel .item {
  position: absolute;
  left: 0;
  right: 0;
  opacity: 1;
  transition: opacity 0.4s, left 0.2s;
}

.carousel.fast .item {
  transition: none;
}

.carousel .item img,
.carousel .item video {
  cursor: pointer;
  border: 2px solid rgb(var(--secondary));
  transition: border 0.2s;
    border-bottom-width: 1em;
}

.carousel .item tr:hover img,
.carousel .item tr:hover video {
  object-fit: cover;
    border-color: rgb(var(--primary));
}

.carousel .item.hide {
  visibility: hidden;
  left: 80%;
  opacity: 0;
}

.carousel .item[data-index][data-length]::before {
    content: attr(data-index) " / " attr(data-length);
    position: absolute;
    top: -1em;
    left: 0;
    right: 0;
    font-size: 0.8em;
    text-align: center;
}

.carousel .item.text {
  color: rgb(var(--primary));
  text-decoration: underline;  
}

.carousel-dialog {
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));  
}
</pre>
<pre id="carousel-script" class="hidden">
window.addEventListener('load', setCarousel);
function setCarousel() {
  if(Array.from(document.querySelectorAll('.carousel img')).filter(i => i.parentElement.tagName.toLowerCase() === 'a').length > 0)
  {
    console.error("Carousel has image with link: Will prevent carousel function");
    return;
  }
  if(Array.from(document.querySelectorAll('.carousel')).filter(i => i.querySelectorAll('.item:not(.hide)').length == 1).length != document.querySelectorAll('.carousel').length)
  {
    console.error("Carousel initial view fail: Will prevent carousel function");
    return;
  }
  
    for (let carousel of document.querySelectorAll('.carousel')) {
    carousel.style.height = carousel.querySelector('.item:not(.hide)')?.offsetHeight + 'px';

    let counter = 1;
        let items = carousel.querySelectorAll('.item');
        for (let item of items) {
      if(!item.hasAttribute('data-index')) {
        item.setAttribute('data-index', counter++);
        item.setAttribute('data-length', items.length);
      }
      for(let media of item.querySelectorAll('img, video')) {
        media.onclick = function() {
          showNextCarouselItem(event.target.closest('.carousel'));
        };
      }
        }
    }
}
function showNextCarouselItem(tn) {
  // all children
    let tc = tn.querySelectorAll('.item');
  // identify active child
  let active = Array.from(tc).findIndex(t => !t.classList.contains('hide'));
  if (active == null) return;
  // hide all
  for(let t of tc) {
    t.classList.add('hide');
  }
  // set next child to display, or first if reach last child
  let nextActive = tc[active].nextElementSibling;
  if(!nextActive) nextActive = tn.firstElementChild;
  nextActive.classList.remove('hide');
  // fast mode: transition disabled if click/tap fast enough
  if(new Date() - window['tn'] &lt; 200) 
    tn.classList.add('fast');
  else 
    window['tn'] = new Date();
  // set height of container
  setTimeout(function() {
    tn.style.height = nextActive.offsetHeight + 'px';
  }, tn.classList.contains('fast') ? 0 : 200);
}
</pre>
<script id="carousel-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#carousel-style').innerHTML;
document.body.appendChild(css);
js = document.createElement('script');
js.innerHTML = document.querySelector('#carousel-script').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>');
document.body.appendChild(js);
</script>
<pre id="carousel-tag">
&lt;div class="carousel"&gt;
  &lt;div class="item"&gt;&lt;/div&gt;
  &lt;div class="item hide"&gt;&lt;/div&gt;
  &lt;div class="item hide"&gt;&lt;/div&gt;
  ...
&lt;/div&gt;
</pre>
<div class="carousel">
  <div class="item">
    <table
      align="center"
      cellpadding="0"
      cellspacing="0"
      class="tr-caption-container"
      style="margin-left: auto; margin-right: auto;"
    >
      <tbody>
        <tr>
          <td style="text-align: center;">
            <img
              border="0"
              data-original-height="1537"
              data-original-width="1280"
              height="385"
              src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjSCwFrwHYWWP_iDd-_D8s4DWfNUsG0mNz7yKPIpVm-0WlpNQ5dK1mzjcNlYFF9zzJuRKWucffLGc1xBxjPH6o9KWxKKfa9i-MiMEPuoUJGmakkxpq12xGF3hwALeC1bP2RUIp9Vn_LpDhefag3bYhCn8K3g75VvkeAtzdBNBlkoWNG0gW_07-jGlxu79M/s380/kimisomu12_raincoat.jpg"
              width="320"
            />
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Even in a raincoat Isaki is still adorable af
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item hide">
    <table
      align="center"
      cellpadding="0"
      cellspacing="0"
      class="tr-caption-container"
      style="margin-left: auto; margin-right: auto;"
    >
      <tbody>
        <tr>
          <td style="text-align: center;">
            <img
        loading="lazy"
              border="0"
              data-original-height="720"
              data-original-width="1280"
              height="180"
              src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhIAJTgdEQrEtu-rOLNPqKzkEhJPp2r-KdrWLNAcdvmUIALJBu-so0Azj8UAHItQ-DAOnda-6JBZVsvrHVgvAvhXMMgbxgveKAubKSuO997CwzbuoJX5Oi_YF2lJ4oj7NWd2nQgQJCoWCuIUrnbh-kYSUp9-jLL9gDAH9lHZqLXKmRspSReaMRmbEf3dSY/s320/kimisomu12_tea.jpg"
              width="320"
            />
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Glad to see the Japanese universal tea drinking pose is still up and running haha
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="carousel">
  <div class="item">
    <table
      align="center"
      cellpadding="0"
      cellspacing="0"
      class="tr-caption-container"
      style="margin-left: auto; margin-right: auto;"
    >
      <tbody>
        <tr>
          <td style="text-align: center;">
            <img class="img-width-fit"
              border="0"
              data-original-height="720"
              data-original-width="1280"
              height="180"
              src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEipwSA-2PA9sgTx8bLGE5LX22SJxB1BU2vYEKiqAAvP2PNabdyEFuS93gq142SbO2qfES3HyYtH-0CFZXoj-HbDG-oLbZJrumJ7Axfnj1-h72SDWCN6x7Hplaoim3MV620-bK0hpwWB-g3h0nVrnEASf0yxn_1fyGuyoRgH0UWvqg6ii7UJg9u-6E9mpSc/s320/kanokano15_couple2.jpg"
              width="320"
            />
          </td>
          <td style="text-align: center;">
            <img class="img-width-fit"
              border="0"
              data-original-height="720"
              data-original-width="1280"
              height="180"
              src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhyekQzrMbNdj9FbtOsr0qScqAT4qKf8B9Ec9yB8dztol6hRMRGnG7O61Kgy2XDMJoJP5OHJPmDEif8J7SAsQYWbR_RJnKc_Jdf8RBlSNnBA9QicEs6RRklAuabPnxCZ8fZa50vkztF9p3RIQE-t5T13kWZkuRZBm8LOT7cX79omjOrI4SUtgNbr1yh8CM/s320/kanokano15_shove.jpg"
              width="320"
            />
          </td>
        </tr>
        <tr>
          <td class="tr-caption" colspan="2" style="text-align: center;">
            This week in violence we have:<br />I gotta say Saki-chan you lost
            to Milika-san here this episode haha
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item hide">
    <table
      align="center"
      cellpadding="0"
      cellspacing="0"
      class="tr-caption-container"
      style="margin-left: auto; margin-right: auto;"
    >
      <tbody>
        <tr>
          <td style="text-align: center;">
            <img class="img-width-fit"
              border="0"
              data-original-height="720"
              data-original-width="1280"
              height="180"
              src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjJpAmqOwBcljRob0qN8moENYSY7ZSxYKXShs6lpgMJjjayA4qbwiMAVDEp6RtJEQErpR4RKnKsEvlek-MV7HFDkb3rZ4jJ0tH6LcVe7TA2nvyJTipGW4OYDFVimkYT5LxjUedO-OEIdMjDUBhQ2bClqDApqM_4X1nTnyehSxMvY4m8MxzMVDUcwYsI-H8/s320/kanokano15_piggyback1.jpg"
              width="320"
            />
          </td>
          <td style="text-align: center;">
            <img class="img-width-fit"
              border="0"
              data-original-height="720"
              data-original-width="1280"
              height="180"
              src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiJPYJ2gT1RBU9l4eNs77nJTENSr1tbHSxuYuY6LgmLeT1cqc5Tq_HYzAKNyhbUh3lVnl9wEZ6civWyMpN-WIil8HGrVVwF18mEugNQRf5z3bvr7dS8TZturcFf4ko7Z4U7g9Q8XT4ru0anvrGP5QJdsaD08vJV1POf4gmu6NKY6eGLgPALn05wc2L5r_Q/s320/kanokano15_piggyback4.jpg"
              width="320"
            />
          </td>
        </tr>
        <tr>
          <td class="tr-caption" colspan="2" style="text-align: center;">
            Because you know, carrying girls other than your girlfriend(s) is
            his part-time hobby lol
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<h2>Table of Contents</h2>
<h5>Container class "agenda" contains inline style for grid customization (using variable or fallback, max-width)<br />
Children class "item" for content (with link to section, see address bar after click)</h5>
<h5>Style variables: --columns to change no. of columns default 3, --aspect-ratio to if not 1:1</h5>
<button onclick="document.querySelector('#agenda-style').classList.toggle('hidden')">Show CSS</button>
<pre id="agenda-style" class="hidden">
.agenda {
  margin-left: auto;
  margin-right: auto;
}

@supports (display: grid) {
  .agenda {
    /* if grid is supported */
    display: grid;
    grid-template-columns: repeat(var(--columns, 3), 1fr);
  }
}

.agenda .item table.tr-caption-container {
    width: 100%;
  padding: 0;
}

.agenda .item a img {
  width: 100%;
  height: auto;
  object-fit: cover;
  transition: border 0.2s;
  border-color: rgb(var(--secondary));
  border-width: 2px 2px 1em;
  aspect-ratio: var(--aspect-ratio, 1);
}

.agenda .item img:hover {
  border-color: rgb(var(--primary));
}
</pre>
<script id="agenda-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#agenda-style').innerHTML;
document.body.appendChild(css);
</script>
<pre id="agenda-tag">
&lt;div class="agenda" style="--aspect-ratio: [RATIO]; --columns: [COLS];"&gt;
  &lt;div class="item"&gt;&lt;/div&gt;
  &lt;div class="item"&gt;&lt;/div&gt;
  &lt;div class="item"&gt;&lt;/div&gt;
  ...
&lt;/div&gt;
</pre>
<h5>6 items, 3 columns, aspect ratio 1.17</h5>
<div class="agenda" style="--aspect-ratio: 1.17;">
  <div class="item">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto;">
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a href="./pages/2023/08/the-klassic-note-review-202308.html" style="margin-left: auto; margin-right: auto;">
              <img border="0" data-original-height="794" data-original-width="800" height="318" src="https://www.jvcmusic.co.jp/sukimega/op/images/jk_anim.jpg" width="320" /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Tsuzuri - NAME [Single]
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto;">
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a href="#KanaClubSummerPostcard" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="500" data-original-width="500" height="320" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg61TYSG12FaUhx6wSbeB6R-PEzFD9EIa0w1XnFFirstSYFFZsybBGitNFLvn6JmxOyldyjrYKx6BizV8Ex4JgqCJ7sk9yUzzLWnDLjB9ZqEnAm9PXWWHV3GQA3vqnbtmlNaA_22kaFyL7PZVlFrkzbmgux1Tzl3JP3kYz7-jEYkZjVh91hghNXqkp5pCM/s320/logo-blue_print.jpg" width="320" /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Hanazawa Kana Fanclub "Destination Club" SUMMER GREETING CARD 2023
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto;">
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a href="#Akarin2023TourGoods" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="1113" data-original-width="1046" height="320" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhWAJD1t3ou8ap3sWVIgvsmrirujTxFI8t0vwIlJx_JrD_RS9vRp3NnG5vp69SpywCQSca3qkbizzdxJkpICH9P3fKbB-awytGJFImcGBQuRHgwLBGUZzyI3FI8YXcN5qYKsszznBk54mKca1zW3lOIIm2uylHBzuEIw0L3zEKjotvfVYJ7XUuBQxEVbiE/s320/1429003003_1.png" width="301" /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Kitou Akari Zepp Tour 2023 Goods
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto;">
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a href="#MaiMaiKBSGoods" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="992" data-original-width="992" height="320" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZBiVb8uyCTklhwfAMUWUVVZ5dgBaBmClj-2XOrN60IB3a343qCHnfPrBqpw3Ra4BcxF83WPDbnfZ_-ly7zNL1_O6FUct7oqwlCsYVNEKO0ILFgYmwbK3UUm5E_0eHuJ9a7YgIv3BWedfKIYeYUDBWubqx2b_kiS1sWU_094FrN3hHfi54nADYrJ4SKQo/s320/0c8e0da345762ce42340.jpg" width="320" /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            KannoMai Birthday Summer Goods
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto;">
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a href="#DOAXVVAcrylicSets" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="680" data-original-width="680" height="320" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEicmyyFiXjEECAYjrwy7hHEiK8nvBUiui5WCYs6o13JMbIoMRdjo2AoPwhCJu_DBdHFkc923UmnBSn9mRNxVgVFYEhV-olPStR7rWnIPVr6l0oI3JEQwXsPblyRhRbC9hq5K7cY8Y6HYNhBreadxxNUON1mgYI4a1vZPSS_kixVyisAhtu2Hu3ZlUOaLrY/s320/306996604307430_680.jpg" width="320" /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            DEAD OR ALIVE Xtreme Venus Vacation Venus Acrylic Diorama Set (5.5
            Years)
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto;">
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a href="#DoukiChanVol10" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="1129" data-original-width="800" height="320" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj1rIpIMrsSYkblMmKZxponOv6v4hI0QQswBS6iNhJ7Fk1bnvV_reo_j9nJtQDCc-GAcPFx72ZiXiC1PCb8opgTrtU8CPGJ2OoXPAckN6adt52js6-bsKuSpkKmvF5oggnNZDuhNY0Bu2lx5TbmO2mEDqZ36JSwbCvfyRMY74mWI7otOo1-S82Zq_ND8p8/s320/040031080689-1p.jpg" width="227" /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Ganbare Douki-chan Vol.10
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<h5>2 items, 2 columns, default aspect ratio, custom max width</h5>
<div class="agenda" style="--columns: 2; max-width: 400px;">
  <div class="item">
    <table
      align="center"
      cellpadding="0"
      cellspacing="0"
      class="tr-caption-container"
      style="margin-left: auto; margin-right: auto;"
    >
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a
              href="#ComicDengekiDaiouji"
              style="margin-left: auto; margin-right: auto;"
              ><img
                border="0"
                data-original-height="500"
                data-original-width="349"
                height="320"
                src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhaZ678A-NiWDgdQs4bx5D6C8T5CtATLRq-iRT3BJ-B02LHMbFvTq3KjfwIuBM6cvaaZYTXaUVxbHMR_LZCiWlqSna0aXdBVctuv8A5NWOgu1x6xIXvi9SUxP2LinKU_ByfiTMd_EtwZBtI9mlvbsGi-QyhyG2WfM13LsnCwz5t-0KqPA/s320/10704905.jpg"
                width="226"
            /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Comic Dengeki Daiouji Vol.125
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="item">
    <table
      align="center"
      cellpadding="0"
      cellspacing="0"
      class="tr-caption-container"
      style="margin-left: auto; margin-right: auto;"
    >
      <tbody>
        <tr>
          <td style="text-align: center;">
            <a
              href="./pages/2024/02/the-twenty-second-book-worth-of-photos.html"
              style="margin-left: auto; margin-right: auto;"
              ><img
                border="0"
                data-original-height="640"
                data-original-width="452"
                height="320"
                src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjjyOnfJl_B2hzD5Dv8DXt6Um0AzQ783MyarmTK8SBpUfZf_nqDNPRxmghbYZL2zqQWWQh8_Jv6ImFfMs1HH9wLtMbJJpjUGeLaoNKvP45dr3pPxWpOQPwE2snFSDQsncZBb0DxNed6D8uNEDTPe96lT0YQJ4zWA0qAPSvRDItqYVUwD2Od9NUJNa4L6Nw/s320/10694326.jpg"
                width="226"
            /></a>
          </td>
        </tr>
        <tr>
          <td class="tr-caption" style="text-align: center;">
            Ogura Yui Photobook "Yuitabi"
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<h2>Data Table</h2>
<h5>Responsive width table (not height responsive, no sticky rows) with horizontal borders</h5>
<h5>Use table generators (eg. <a href="https://divtable.com/generator/">DivTable.com</a>) to render HTML and add container and inline styles (optional)</h5>
<h5>Add class "all-borders" to include vertical borders, "freeze-(left/right)" to freeze first/last column</h5>
<button onclick="document.querySelector('#datatable-style').classList.toggle('hidden')">Show CSS</button>
<pre id="datatable-style" class="hidden">
.datatable {
  white-space: nowrap;
  overflow: auto;
}

.datatable table {
    border-collapse: collapse;
}

.datatable td, .datatable th {
  border-top: 1px solid rgb(var(--foreground));
  border-bottom: 1px solid rgb(var(--foreground));
  box-sizing: border-box;
  padding: 0 5px;
}

.datatable.center-text td {
  text-align: center;
}

.datatable.all-borders td, .datatable.all-borders th {
    border-left: 1px solid rgb(var(--foreground));
    border-right: 1px solid rgb(var(--foreground));
}

.datatable.freeze-left th:first-child,
.datatable.freeze-left td:first-child {
  position: sticky;
  left: 0;
  max-width: 200px;
  overflow-x: hidden;
  text-overflow: ellipsis;
  background-color: rgb(var(--background));
}

.datatable.freeze-right th:last-child,
.datatable.freeze-right td:last-child {
  position: sticky;
  right: 0;
  max-width: 200px;
  overflow-x: hidden;
  text-overflow: ellipsis;
  background-color: rgb(var(--background));
}
</pre>
<script id="datatable-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#datatable-style').innerHTML;
document.body.appendChild(css);
</script>
<pre id="datatable-tag">
&lt;div class="datatable freeze-left freeze-right all-borders"&gt;
  &lt;table&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;th class="freeze"&gt;&lt;/th&gt;
        &lt;th&gt;&lt;/th&gt;
        ...
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td
          class="freeze"
          title=''
        &gt;&lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
        ...
      &lt;/tr&gt;
      ...
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/div&gt;
</pre>
<h5>Freeze first column, inline smaller font</h5>
<div class="datatable freeze-left">
    <table>
      <tbody>
        <tr>
          <th class="freeze">Item</th>
          <th>From</th>
          <th>Timeline</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Shipping</th>
          <th>Purchased On</th>
          <th>Arrived On</th>
          <th>Condition</th>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Kanno Mai "VOICE+ Vol.5" Print Tune Bromide Set'
          >
            Kanno Mai "VOICE+ Vol.5" Print Tune Bromide Set
          </td>
          <td>Mercari</td>
          <td>2023.02</td>
          <td>2</td>
          <td>¥999</td>
          <td>-</td>
          <td>2023.05.31<br />🟧</td>
          <td>2023.06.09<br />🟧🟧</td>
          <td>OK?</td>
        </tr>
        <tr>
          <td class="freeze" title='Ueda Reina CD "Atrium" Animate Bonus'>
            Ueda Reina CD "Atrium" Animate Bonus
          </td>
          <td>Y!</td>
          <td>2022.10<br />🟩</td>
          <td>1 (+File)</td>
          <td>¥1000</td>
          <td>¥210</td>
          <td>2023.06.02<br />🟧</td>
          <td>2023.06.05<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Waki Azumi "Kimi to no Mirai" Release Event Bromides'
          >
            Waki Azumi "Kimi to no Mirai" Release Event Bromides
          </td>
          <td>Y!</td>
          <td>2023.03</td>
          <td>6</td>
          <td>¥1000🔽</td>
          <td>¥210</td>
          <td>2023.06.02<br />🟧</td>
          <td>2023.06.05<br />🟧🟧</td>
          <td>Bent</td>
        </tr>
        <tr>
          <td class="freeze" title='Nagae Rika "Re:color" Gamers Bonus'>
            Nagae Rika "Re:color" Gamers Bonus
          </td>
          <td>Mercari</td>
          <td>2023.02</td>
          <td>2</td>
          <td>¥1000</td>
          <td>-</td>
          <td>2023.06.02<br />🟧</td>
          <td>2023.06.06<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Aizawa Saya "Kimi no Iro, Kimi no Koe wo Kikasete" Event Bromides'
          >
            Aizawa Saya "Kimi no Iro, Kimi no Koe wo Kikasete" Event Bromides
          </td>
          <td>Mercari</td>
          <td>2022.05<br />🟩</td>
          <td>2</td>
          <td>¥444</td>
          <td>-</td>
          <td>2023.06.02<br />🟧</td>
          <td>2023.06.08<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td class="freeze" title='Koga Aoi "Seiyuu Animedia Aug 2020" Bonus'>
            Koga Aoi "Seiyuu Animedia Aug 2020" Bonus
          </td>
          <td>Mercari</td>
          <td>2020.07<br />🟩🟩🟩</td>
          <td>1</td>
          <td>¥50🔽</td>
          <td>¥185</td>
          <td>2023.06.02<br />🟧</td>
          <td>2023.06.06<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td class="freeze" title='Natsukawa Shiina "Yueni" Animate Bonus'>
            Natsukawa Shiina "Yueni" Animate Bonus
          </td>
          <td>Y!</td>
          <td>2023.05</td>
          <td>1</td>
          <td>¥700</td>
          <td>¥210</td>
          <td>2023.06.03<br />🟧</td>
          <td>2023.06.07<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td class="freeze" title='Natsukawa Shiina "Yueni" HMV Bonus'>
            Natsukawa Shiina "Yueni" HMV Bonus
          </td>
          <td>Mercari</td>
          <td>2023.05</td>
          <td>1</td>
          <td>¥300</td>
          <td>-</td>
          <td>2023.06.03<br />🟧</td>
          <td>2023.06.08<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Kouno Marika "Gekkan Bushiroad Mar 2022" Gamers Bonus'
          >
            Kouno Marika "Gekkan Bushiroad Mar 2022" Gamers Bonus
          </td>
          <td>Y!</td>
          <td>2022.02<br />🟩</td>
          <td>1</td>
          <td>¥400</td>
          <td>¥185</td>
          <td>2023.06.04<br />🟧</td>
          <td>2023.06.07<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='TrySail "Seiyuu Grand Prix Jul 2021" HMV Bonus'
          >
            TrySail "Seiyuu Grand Prix Jul 2021" HMV Bonus
          </td>
          <td>Y!</td>
          <td>2021.06<br />🟩🟩</td>
          <td>1</td>
          <td>¥700</td>
          <td>¥210</td>
          <td>2023.06.04<br />🟧</td>
          <td>2023.06.09<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='TrySail "Seiyuu Grand Prix Jul 2021" Animate Bonus'
          >
            TrySail "Seiyuu Grand Prix Jul 2021" Animate Bonus
          </td>
          <td>Y!</td>
          <td>2021.06<br />🟩🟩</td>
          <td>1</td>
          <td>¥300</td>
          <td>¥185</td>
          <td>2023.06.04<br />🟧</td>
          <td>2023.06.07<br />🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Takahashi Rie "Seiyuu Grand Prix Jul 2023" Bromide Set'
          >
            Takahashi Rie "Seiyuu Grand Prix Jul 2023" Bromide Set
          </td>
          <td>Mercari</td>
          <td>2023.06</td>
          <td>3</td>
          <td>¥2555</td>
          <td>-</td>
          <td>2023.06.09<br />🟧🟧</td>
          <td>2023.06.14<br />🟧🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Takahashi Rie "TV Guide A Stars vol.02" Gamers Bonus'
          >
            Takahashi Rie "TV Guide A Stars vol.02" Gamers Bonus
          </td>
          <td>Y!</td>
          <td>2023.03</td>
          <td>1</td>
          <td><strike>¥1000</strike><br />¥1100🔼</td>
          <td>¥185</td>
          <td>2023.06.09<br />🟧🟧</td>
          <td>2023.06.13<br />🟧🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Ueda Reina "Seiyuu Grand Prix Dec 2022" Animate Bonus'
          >
            Ueda Reina "Seiyuu Grand Prix Dec 2022" Animate Bonus
          </td>
          <td>Mercari</td>
          <td>2022.11<br />🟩</td>
          <td>1</td>
          <td>¥399</td>
          <td>-</td>
          <td>2023.06.11<br />🟧🟧</td>
          <td>2023.06.19<br />🟧🟧🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td class="freeze" title='TrySail "Karei One Turn / Follow You!" Set'>
            TrySail "Karei One Turn / Follow You!" Set
          </td>
          <td>Mercari</td>
          <td>2023.05</td>
          <td>1 (+Card)</td>
          <td>¥1300</td>
          <td>-</td>
          <td>2023.06.12<br />🟧🟧🟧</td>
          <td>2023.06.16<br />🟧🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td class="freeze" title='Kanno Mai "Kanno Mai to Issho." Bonus'>
            Kanno Mai "Kanno Mai to Issho." Bonus
          </td>
          <td>Mercari</td>
          <td>2022.08<br />🟩</td>
          <td>1</td>
          <td>¥1500🔼</td>
          <td>-</td>
          <td>2023.06.12<br />🟧🟧🟧</td>
          <td>2023.06.16<br />🟧🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Amamiya Sora "10 miles to America" HMV Bonus'
          >
            Amamiya Sora "10 miles to America" HMV Bonus
          </td>
          <td>Mercari</td>
          <td>2023.06</td>
          <td>2</td>
          <td>¥1111</td>
          <td>-</td>
          <td>2023.06.14<br />🟧🟧🟧</td>
          <td>2023.06.16<br />🟧🟧🟧</td>
          <td>OK</td>
        </tr>
        <tr>
          <td
            class="freeze"
            title='Asakura Momo "Seiyuu Grand Prix Apr 2022" Animate + Gamers Bonus'
          >
            Asakura Momo "Seiyuu Grand Prix Apr 2022" Animate + Gamers Bonus
          </td>
          <td>Mercari</td>
          <td>2022.03<br />🟩</td>
          <td>2</td>
          <td>¥599</td>
          <td>-</td>
          <td>2023.06.18<br />🟧🟧🟧</td>
          <td>2023.06.21<br />🟧🟧🟧🟧</td>
          <td>OK</td>
        </tr>
      </tbody>
    </table>
</div>


<h2>Accordion</h2>
<h5>Container "accordion" (optionally, with id) contains child class "header" to expand children "content" and optional "footer", latter to allow collapse</h5>
<button onclick="document.querySelector('#accordion-style').classList.toggle('hidden')">Show CSS</button>
<button onclick="document.querySelector('#accordion-script').classList.toggle('hidden')">Show JS</button>
<pre id="accordion-style" class="hidden">
.accordion {
  cursor: pointer;
}
.accordion > .header {
  padding: 4px 8px;
  background-color: rgb(var(--accent));
}
.accordion > .content {
  cursor: initial;
  border: 5px solid rgb(var(--accent));
  border-top: 0;
  border-bottom: 0;
}
.accordion > .footer {
  background-color: rgb(var(--accent));
  text-align: center;
}
.accordion > .content,
.accordion > .footer {
  padding: 4px 8px;
  display: none;
}

.accordion.show {
  border-color: rgb(var(--foreground));
}

.accordion.show > .content,
.accordion.show > .footer {
  display: block;
}
</pre>
<pre id="accordion-script" class="hidden">
window.addEventListener('load', setExpander);
function setExpander() {
  for(let accordion of document.querySelectorAll('.accordion'))
  {
    accordion.querySelector('.header')?.addEventListener('click', toggleExpander);
    accordion.querySelector('.footer')?.addEventListener('click', toggleExpander);
  }
}
function toggleExpander() {
  let parent = event.target.closest('.accordion');
  parent.classList.toggle('show');
  parent.querySelector('.header').scrollIntoView({ block: 'center' });
}
</pre>
<script id="accordion-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#accordion-style').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>');
document.body.appendChild(css);
js = document.createElement('script');
js.innerHTML = document.querySelector('#accordion-script').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>');
document.body.appendChild(js);
</script>
<pre id="accordion-tag">
&lt;div class="accordion"&gt;
  &lt;blockquote class="header"&gt;[TITLE]&lt;/blockquote&gt;
  &lt;div class="content"&gt;[CONTENT]&lt;/div&gt;
  &lt;hr&gt;
  &lt;blockquote class="footer"&gt;CLOSE&lt;/blockquote&gt;
&lt;/div&gt;
</pre>
<div class="accordion" id="mute-QnA">
  <div class="header">
    <blockquote class="tr_bq">
    <div style="text-align: center;">
      <span style="font-size: large;">100 QUESTIONS FOR HONDO KAEDE!!!</span>
    </div>
    </blockquote>
    <blockquote class="tr_bq">
    <div style="text-align: center;">
      <span style="font-size: small;">(Selected ones will be mentioned here in quote, above is full if you interested and can Japanese)</span>
    </div>
    </blockquote>
  </div>
  <div class="content">
    <div>Q1: Origin of name</div>
    <div>
    A1: Mother encountered people of fate who were named "Sakura" and
    "Kaede" more than often especially more of the former, so it was a hard
    decision between them
    </div>
    <div>[Well thank goodness it isn't "Hondo Sakura" lol]</div>
    <div><br></div>
    <div>Q2: Nickname(s) as a kid</div>
    <div>A2: Kae-chan, Ede-chan</div>
    <div>
    [Kae-chan? Is that something I can call you after dating you twice?
    Hehe]
    </div>
    <div>
    <div><br></div>
    <div>Q3: Similarities to parents</div>
    <div>A3: Partly similar to father, mostly mother</div>
    <div><br></div>
    <div>Q4: Earliest memory of your life</div>
    <div>
      A4: Recollection of being in Higashiyama Zoo (Aichi Prefecture where
      she was born) where she was trying to get a handshake with a giraffe
      mascot who walked away, and (she) shouted "Wait up! If you leave I'll
      throw this at you!!" while crying and running towards it
    </div>
    <div>
      [LOL that sounded bad but the mascot with a long neck probably did not
      notice her]
    </div>
    <div><br></div>
    <div>Q5: Things you were interested to learn as a kid</div>
    <div>A5: Calligraphy for a year plus, swimming for around 5 years</div>
    </div>
    <div><br></div>
    <div>A53: Without going overboard... hmm... shopping or sorts?</div>
    <div>[Yeah fine I'll carry your bags for the stuff I paid haha]</div>
    <div><br></div>
    <div>Q55: What do you see in your partner</div>
    <div>
    A55: Serious, honest, knowledgeable, nice, nice, nice, laughs a lot,
    playful mind at heart and carries one's dreams and hopes moving forward
    </div>
    <div>
    [Three nices? Well in her defence I already lost at being knowledgeable
    so]
    </div>
    <div><br></div>
    <div>Q57: What you want to listen on a driving date?</div>
    <div>
    A57: Whatever they like they can let it play! If it gets too loud I'll
    get uncomfortable (though)
    </div>
    <div>[Remind me to bring up like, Teshima Aoi on our drive lol]</div>
    <div><br></div>
    <div>Q58: Fetishes</div>
    <div>A58: I wonder what they are...</div>
    <div>[I wonder too, Ede-chan, you into female voice actresses?]</div>
    <div><br></div>
    <div>Q59: What tickles your fancy?</div>
    <div>A59: I wonder what they are...</div>
    <div>
    [Okay guys literally drill her with your kindness, she doesn't have that
    moment so you gotta put in the effort]
    </div>
    <div><br></div>
    <div>Q61: Would you prefer to confess or be confessed to?</div>
    <div>A61: I would like to confess from my side! Without hesitation!</div>
    <div>[Well I look forward to the day I get confessed to by you-]</div>
    <div><br></div>
    <div>Q62: Own charm points</div>
    <div>
    A62: Strong eyes and...
    <a href="https://jisho.org/search/yaeba" target="_blank">double tooth</a>?
    </div>
    <div>
    [Yes and YES OH MY FUCKING GOD- I thank our Lord and saviour for
    stopping this girl from fixing her teeth]
    </div>
    <div><br></div>
    <div>Q100: Last word!</div>
    <div>
    A100: Thanks for getting your hands on this! My favourite foods,
    outfits, places, people... a lot of them were being compiled! This
    photobook where being a voice actress but it was without the essence of
    voice within, I gave the title of the book "MUTE". The stuff I worked a
    lot on and I will continue to work on and enjoy them all back and forth,
    so please continue to show your support!
    </div>
    <div>[Ah, so THAT is how the title came about; She is right though]</div>
  </div>
  <div class="footer">[CLOSE]</div>
</div>


<!-- FINE PRINT
<style>
.fineprint {
  font-size: 0.2em;
  max-height: 50vh;
  overflow-y: auto;
  cursor: pointer;
  border-color: rgb(var(--secondary));
  border-style: solid;
  border-width: 2px 2px 14px;
  transition: border 0.2s;
}
.fineprint:hover {
  border-color: rgb(var(--primary));
}
.fineprint.show {
  border-color: rgb(var(--foreground));
  font-size: 1em;
  padding: 4px 8px;
}
</style>
<script>
window.addEventListener('load', focusOnExpandFineprint);
function focusOnExpandFineprint() {
  for(let fp of document.querySelectorAll('.fineprint'))
  {
    fp.addEventListener('click', function() {
      fp.classList.toggle('show');
      fp.scrollIntoView({ block: 'center' });
    });
  }
}
</script>
<h2>Fine Print</h2>
<h5>Container "fineprint", single element with reduced font, used on unimportant paragraphs to save space<br />
(Not to be confused with Accordion where content to be paired with header)</h5>
<pre>
&lt;div class="fineprint"&gt;
  [CONTENT]
&lt;/div&gt;
</pre>
Congratulations to CHiCO's collaboration single for best single and
Amamiya Sora's best albums for best album(s) for Klassic Note 2022!!<br />
<br />
<div class="fineprint">
Here are my thoughts about this year's Top 20 as elaborated from above,
as a summary:<br />
<ul style="text-align: left;">
  <li>
  I have already set my sights for mol-74 taking in the top spot
  mainly because none of the others impressed me in the long run with
  a particularly strong emotion. It was already hard for them to
  impress even in the short run, which will be the influence of the
  rankings this year.
  </li>
  <li>
  For the idolism grouping rank, I opted for Kouno Marika for a simple
  song on her 1st album early this year, and Minase Inori which I
  thought the song which started the year was actually good, which
  made me hesitant to choose between this and "glow", the topic song
  from her album in July. I even thought these songs are actually
  better than mainstream, putting them above Scenarioart and nano.RIPE
  for comparison. Natsukawa Shiina did not join in the ranks because I
  felt like her best effort is not going to win her 3rd single, and
  Asakura Momo went above the ranks just because of a very different
  melody I can concur.
  </li>
  <li>
  It was wise from this year's song list to include mainstream artists
  whom I think mattered for the year in the review boom halfway
  through the year, which were Creepy Nuts, Kami wa Saikoro wo Furanai
  ie. KamiSai, and Kroi. The problem is where to put them. I chose to
  group the latter two together and put down Creepy Nuts for the rap
  genre which I'm not too keen but so is Kroi. It was hard to juggle
  between these and not putting the other one on top on its own, so to
  speak.
  </li>
  <li>
  Prospective artists I want to give more chances to are Kitani
  Tatsuya who I've known from Anime just recently, and miwa who
  actually did well overall but hard to pick up songs to give for the
  Top 20. For the latter I opted to promote her album topic song but
  even then I can't put myself to place her too high just because.
  </li>
  <li>
  The Top 5 songs have already been pre-determined to some extent.
  Ryokuoushoku Shakai ie. RyokuShaka did well this year so it was
  obvious to choose between the topic songs of their 2 singles and 1
  album for a winner. harmoe is the best idol song which impressed me
  so I had to leave a spot for them, and I still cannot believe I can
  be back giving songs to amazarashi and for them to be up on the
  ranks. I guess depression might be getting back onto me since I
  ditched it in 2018.
  </li>
  <li>
  Genie High is the last-minute option due to me realizing how simple
  the melody is for this song, and of course that it has been accented
  by guest vocalist Kouno Marika (see above) so this is just an extra
  win for the voice actress, in my opinion.
  </li>
  <li>
  For emotional tunes there aren't many or even any to be frank
  compared to last year I just realized, so I'm glad I still
  remembered the ClariS and TrySail collaboration song to put them in
  here. As usual, the composer who also did many for Anime series
  "Madoka Magica" doing wonders every time I get into it.
  </li>
</ul>
</div>
-->


<!-- SCALE
<style>
.scale {
  display: flex;
    /* gap: 5px; */
}
.scale * {
  background-color: gray;
  width: 2em;
  height: 10px;
}

.scale[data-id="1"] div:nth-child(1),
.scale[data-id="2"] div:nth-child(1),
.scale[data-id="2"] div:nth-child(2),
.scale[data-id="3"] div:nth-child(1),
.scale[data-id="3"] div:nth-child(2),
.scale[data-id="3"] div:nth-child(3),
.scale[data-id="4"] div:not(:nth-child(5)),
.scale[data-id="5"] div {
  background-color: rgb(var(--primary));
}

.scale::after {
  content: attr(data-id) "/" attr(data-scale);
    padding-left: 5px;
}
  
progress.scale {
  border-radius: 0;
  height: 1em;
}
progress.scale::-webkit-progress-bar,
progress.scale::-moz-progress-bar {
  background-color: transparent;
}
progress.scale::-webkit-progress-value {
  background-color: cyan;
}
progress.scale::after {
  content: attr(value) "/" attr(max);
    padding-left: 5px;
}
</style>
<script>
window.addEventListener('load', addScales);
function addScales() {
  for(let scale of document.querySelectorAll('.scale'))
  {
    let num = parseInt(scale.getAttribute('data-scale'));
    for(i = 0; i < num; i++)
    {
      let block = document.createElement('div');
      scale.appendChild(block);
    }
  }
}
</script>
<h2>Rating Scale</h2>
<h5>Container "scale", js to populate div children, to show scale (in this case out of 5)</h5>
<pre>
&lt;div class="scale" data-id="3" data-scale="5"&gt;
  &lt;div&gt;&lt;/div&gt;
  ...
&lt;/div&gt;
</pre>
<div class="scale" data-id="1" data-scale="5"></div>
<div class="scale" data-id="3" data-scale="5"></div>
<div class="scale" data-id="5" data-scale="5"></div>
<h5>Alternative is to design this by using &lt;progress&gt; tag</h5>
<pre>
&lt;progress class="scale" value="3" max="5"&gt; 
&lt;/progress&gt;
</pre>
<progress class="scale" value="3" max="5"></progress>
 -->


<h2>Conversation</h2>
<h5>For selected lines of text with separator wrapped in container "conversation"<br />
Content will be styled to have chat boxes, left and right aligned</h5>
<h5>Note: Uses innerText property which removes tags and only read per line in HTML (separator '\n'), do not style text</h5>
<h5>To set custom seaprator, define "data-separator" attribute, default colon ':'<br />
To set who is right aligned, define "data-sender" attribute, else all left align<br />
To allow enactment of lines, define "data-animate" attribute; Will auto scroll if container overflow</h5>
<button onclick="document.querySelector('#conversation-style').classList.toggle('hidden')">Show CSS</button>
<button onclick="document.querySelector('#conversation-script').classList.toggle('hidden')">Show JS</button>
<pre id="conversation-style" class="hidden">
.conversation a {
    display: inline-block;
	padding: 12px 6px;
	font-size: 1.2em;
}
.conversation .messages {
	background-color: rgb(var(--secondary));
    height: min(100dvh - 350px, 35em);
    overflow-y: auto;
	position: relative;
    resize: vertical;
}
.conversation .messages[data-running]::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}
.conversation .messages::-webkit-scrollbar {
	display: none; /* Chrome, Safari and Opera */
}
.conversation .messages {
	-ms-overflow-style: none;  /* IE and Edge */
	scrollbar-width: none;  /* Firefox */
}
.conversation .message {
	display: flex;
	align-items: center;
	opacity: 1;
    padding: 0 8px 4px;
}
.conversation .message.hide {
	opacity: 0;
}
.conversation .message span {
	margin: 8px;
	padding: 6px;
	background-color: rgb(var(--accent));
	border-radius: 10px 10px 10px 0;
	text-align: left;
}
.conversation .message[data-system] {
	justify-content: center;
}
.conversation .message[data-sender] {
	justify-content: flex-end;
}
.conversation .message[data-name]::before {
	content: attr(data-name);
    white-space: nowrap;
}
.conversation .message[data-sender] span {
	background-color: rgb(var(--secondary));
	border-radius: 8px 8px 0 8px;
}
.conversation .message[data-system] span {
	background-color: rgb(var(--secondary));
}
.conversation .message[data-url]:has(img) span {
	width: min(20em, 60%);
    line-height: 0;
}
.conversation .message[data-url] a {
	font-weight: normal;
	text-decoration: underline;
	font-size: small;
	overflow-wrap: anywhere;
    line-height: 0;
}
.conversation .message[data-url] a:hover {
	color: rgb(var(--background));
}
.conversation .message[data-url] img {
	width: 100%;
	border-radius: 4px;
}
.conversation .footer {
	font-size: 2em;
	justify-content: center;
	cursor: pointer;
}
</pre>
<pre id="conversation-script" class="hidden">
window.addEventListener('load', processConversations);
function processConversations() {
  for(let converse of document.querySelectorAll('.conversation'))
  {
    let separator = converse.getAttribute('data-separator') || ':';
    let systemMessagePrefix = '===';
    let lines = converse.innerText.split('\n');
	if(lines.length &lt; 2) {
		converse.innerHTML = 'Click on Editor to create a conversation list';
		continue;
	}
    else converse.innerHTML = '';
	
	let prevName = '';
    for(let line of lines)
    {
	  let isSystem = line.startsWith(systemMessagePrefix) &amp;&amp; line.endsWith(systemMessagePrefix);
	  let isUrl = line.startsWith('https://') || line.startsWith('http://');
      let lineDiv = document.createElement('div');
      lineDiv.classList.add('message');
      
        let messageDiv = document.createElement('span');
	if(!isSystem) // for non-system, if line has no sender, use previous
		lineDiv.setAttribute('data-name', !isUrl &amp;&amp; line.includes(separator) ? line.trim().substring(0,line.indexOf(separator)).trim() : prevName);
	prevName = lineDiv.getAttribute('data-name');
        if(converse.getAttribute('data-sender') != null) {
	  if (isSystem)
	    lineDiv.setAttribute('data-system', '');
	  else {
		  if (isUrl)
	    lineDiv.setAttribute('data-url', '');
          if(converse.getAttribute('data-sender').toLowerCase() == lineDiv.getAttribute('data-name').toLowerCase())
            lineDiv.setAttribute('data-sender', '');
          else
            lineDiv.setAttribute('data-recipient', '');
	  }
        }
        messageDiv.innerText = line.trim().substring(line.indexOf(separator)+1).trim();
	if(isSystem)
	     messageDiv.innerText =  line.trim();
	if(isUrl) {
	     messageDiv.innerHTML =  '';
	     let messageLink = document.createElement('a');
	     messageLink.href = line.trim();
	     messageLink.innerText =  line.trim();
	     messageDiv.appendChild(messageLink);
		
	     let messageImg = document.createElement('img');
	     messageImg.src = line.trim();
	     messageImg.alt = '';
	     messageImg.setAttribute('onload', "event.target.previousElementSibling.remove();");
	     messageImg.setAttribute('onerror', "event.target.remove();");
	     messageImg.setAttribute('oncontextmenu', "return false;");
	     messageDiv.appendChild(messageImg);
	}
        lineDiv.appendChild(messageDiv);
      
      converse.appendChild(lineDiv);
    }
    if(converse.getAttribute('data-animate') != null) {
      let footer = document.createElement('div');
      footer.className = 'footer message';
      footer.innerText = '🔁';
	  footer.title = 'Replay Conversation';
      footer.setAttribute('onclick', "animateConversation(this.closest('.conversation'))");
      converse.appendChild(footer);
    }
  }
}

function animateConversation() {
	let conversation = event.target.closest('.conversation');
	allowRunMessages(conversation);
	
	// read lines
	let lines = conversation.querySelectorAll('.message');
	if(Array.from(lines).filter(l => l.classList.contains('hide')).length > 0) return;
	for(let line of lines)
	{
		line.classList.add('hide');
	}
	// set timing to display and scroll
	for(let l = 0; l &lt; lines.length; l++)
	{
		setTimeout(function() {
			if(conversation.getAttribute('data-running') != null) {
				if(window.ping &amp;&amp; !lines[l].classList.contains('footer') &amp;&amp; lines[l].getAttribute('data-system') == null) // play sound effect on each message
					sfxAudio.play();
				if(lines[l].classList.contains('footer'))
					disableRunMessages(conversation);
				lines[l].classList.remove('hide');
				let heightAboveItem = Array.from(lines).slice(0,l).reduce(function(total, current, index) {
					return total + current.getBoundingClientRect().height;
				}, 0);
				let currentHeight = lines[l].getBoundingClientRect().height;
				let diff = heightAboveItem + currentHeight - conversation.clientHeight; // delta to fix item height rounding
				// console.log(heightAboveItem + currentHeight, conversation.clientHeight);
				if(diff > 0) {
					if(diff &lt; currentHeight) // newest message is not aligned to bottom of container
						conversation.scrollBy({ top: diff, behavior: 'smooth' });
					else
						conversation.scrollBy({ top: currentHeight, behavior: 'smooth' });
				}
				else // newest message is not at or beyond bottom of container
					conversation.scrollTo({ top: 0, behavior: 'smooth' });
			}
		}, l*2000);
	}
}

function allowRunMessages(conversation) {
	// set status
	conversation.setAttribute('data-running', '');
	// disable scroll capture
	conversation.setAttribute('onwheel', 'event.preventDefault()');
	conversation.setAttribute('onmousewheel', 'event.preventDefault()');
	conversation.setAttribute('ontouchstart', 'event.preventDefault()');	
}

function disableRunMessages(conversation) {
	// remove status
	conversation.removeAttribute('data-running');
	// remove scroll capture
	conversation.removeAttribute('onwheel');
	conversation.removeAttribute('onmousewheel');
	conversation.removeAttribute('ontouchstart');
}

</pre>
<script id="accordion-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#conversation-style').innerHTML;
document.body.appendChild(css);
js = document.createElement('script');
js.innerHTML = document.querySelector('#conversation-script').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');
document.body.appendChild(js);
</script>
<pre id="conversation-tag">
&lt;div class="conversation" data-separator="[SEPARATOR_CHAR]" data-sender="[SENDER_NAME]" data-animate&gt;
  [LINES_OF_CONTENT]
&lt;/div&gt;
</pre>
<h5>TWO PARTY CONVERSATION, SENDER NOT DEFINED, NO INLINE STYLES</h5>
<div class="conversation" data-separator="|">
  <div>Nan | I saw you brought someone home in the afternoon, who was that?</div>
  <div>Shouhei | Uh...</div>
  <div>Nan | Is she your girlfriend? She is very cute.</div>
  <div>Shouhei | Are you jealous?</div>
  <div>Nan | W-what are you talking about? Of course not, I was just happy for onii-chan.</div>
  <div>Shouhei | LOL</div>
</div>
<h5>MORE THAN TWO PARTY CONVERSATION, SENDER DEFINED, ANIMATED</h5>
<div class="conversation" data-sender="Shouhei" data-animate style="max-height: 185px; overflow-y: auto;">
  <div>Miyu: Onii-chan, who is she?</div>
  <div>Inori: I didn't know you have such an adorable sister!!</div>
  <div>Shouhei: Uh...</div>
  <div>Miyu: I-Is she your girlfriend??</div>
  <div>Inori: Are you jealous I am hanging out with your brother? That's so cute!</div>
  <div>Miyu: W-what are you talking about? Of course not!</div>
  <div>Shouhei: LOL</div>
</div>


<h2>Abbreviation</h2>
<h5>Extension of abbr element, to allow touch to show title</h5>
<h5>Uses new dialog HTML element to render pop up</h5>
<button onclick="document.querySelector('#abbreviation-style').classList.toggle('hidden')">Show CSS</button>
<button onclick="document.querySelector('#abbreviation-script').classList.toggle('hidden')">Show JS</button>
<pre id="abbreviation-style" class="hidden">
.dialog dialog {
  background-color: rgb(var(--background));
  color: rgb(var(--foreground));  
  padding: 10px;
  max-width: 360px;
  font-family: Noto Sans;
}

.dialog dialog a {
  background-color: rgb(var(--background));
  color: rgb(var(--primary));
}
</pre>
<pre id="abbreviation-script" class="hidden">
window.addEventListener('load', showAbbrAsDialog);
function showAbbrAsDialog() {
  for(let abbr of document.querySelectorAll('.abbreviation'))
  {
    abbr.addEventListener('click', function() {
      event.preventDefault();
      popupText(event.target.title);
    });
  }
}

function popupText(input) {
  let dialogDiv = document.querySelector('.dialog');
  if(dialogDiv == null)
  {
    dialogDiv = document.createElement('div');
    dialogDiv.classList.add('dialog');
    document.body.appendChild(dialogDiv);
  }
  let dialog = createDialog(input);
  dialogDiv.innerHTML = '';
  dialogDiv.appendChild(dialog);
  dialog.showModal();
}

function createDialog(node) {
  // node in dialog will not have events!
  let dialog = document.createElement('dialog');
  if(!dialog.classList.contains('box')) dialog.classList.add('box');
  if(typeof node == 'string')
    dialog.innerHTML = node;
  if(typeof node == 'object')
  {
    let clonedNode = node.cloneNode(true);
    dialog.appendChild(clonedNode);
  }
  dialog.addEventListener('click', function() {
    this.remove();
  });
  dialog.addEventListener('keyup', function() {
    if (event.key === ' ' || event.key === 'Enter')
      this.remove();
  });
  return dialog;
}
</pre>
<script id="abbreviation-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#abbreviation-style').innerHTML;
document.body.appendChild(css);
js = document.createElement('script');
js.innerHTML = document.querySelector('#abbreviation-script').innerHTML.replace(/&lt;/g,'<').replace(/&gt;/g,'>');
document.body.appendChild(js);
</script>
<pre id="abbreviation-tag">
&lt;abbr title="[TITLE HERE]"&gt;
  [CONTENT]
&lt;/abbr&gt;
</pre>
<abbr class="abbreviation" title="Thank Goodness It's Friday">TGIF</abbr>

<h2>Omake</h2>
<h5>Wrapped element to show extra content</h5>
<button onclick="document.querySelector('#omake-style').classList.toggle('hidden')">Show CSS</button>
<pre id="omake-style" class="hidden">
.omake {
	background-color: rgb(var(--accent));
	padding: 1em;
}
</pre>
<script id="omake-loader">
css = document.createElement('style');
css.innerHTML = document.querySelector('#omake-style').innerHTML;
document.body.appendChild(css);
</script>
<pre id="omake-tag">
&lt;div class="omake"&gt;
  [CONTENT]
&lt;/div&gt;
</pre>
<div class="omake">
WORTHY MENTION: COLLECTING CD<br>This technically doesn't fall in this category, since I wouldn't call collecting songs a thing, but hey, it's sort of like it. You like the songs, you buy them and they stack up. *laughs* Not going to do pricing on this one because... I spent a lot. Over the past decade alone, I've spent a lot. A good portion of my salary when I was in the Army went to those, and those were the first things I bought with my own money. So yeah, I'll update if I can count them all haha maybe I can do this
</div>
<br />
<br />
<div class="blank"></div>
<br />
</body>
</html>
